<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Turnaround Time Interactive Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- 
        Chosen Palette: Warm Neutrals (Slate, Zinc, Stone)
        Application Structure Plan: A single-page dashboard layout is used to provide a comprehensive and immediate overview of the TAT data. The core interaction is a set of toggle buttons at the top that switch the entire dashboard's context between the two key processes: "Evaluation to Dictation" (TAT1) and "Dictation to Upload" (TAT2). This structure was chosen because it allows for direct and easy comparison between the two workflows. The layout consists of three main parts: 1) High-level KPI cards for at-a-glance metrics (Average, Min, Max). 2) A central bar chart for visual comparison and quick identification of outliers. 3) A detailed, sortable data table for granular analysis. Additionally, a new "Add Entry" section is introduced at the top to allow users to dynamically input new data, enhancing the interactive nature of the dashboard. This tiered approach (data input -> summary -> visual -> detail) supports various user analysis needs within a single, cohesive view.
        Visualization & Content Choices: 
        - Report Info: Summary statistics (Avg, Min, Max). Goal: Inform. Viz/Method: KPI Cards (HTML/Tailwind). Interaction: Dynamic update on view toggle. Justification: Provides immediate, high-level understanding of performance for the selected process.
        - Report Info: Individual claimant TAT data. Goal: Compare/Analyze. Viz/Method: Vertical Bar Chart (Chart.js/Canvas). Interaction: Tooltips on hover, dynamic data update on view toggle. Justification: Excellent for visually comparing performance across many individual cases and spotting outliers or trends more effectively than a simple table.
        - Report Info: Detailed TAT data per claimant. Goal: Detail/Lookup. Viz/Method: HTML Table. Interaction: Sortable columns, dynamic data update on view toggle. Justification: Allows users to find and examine specific records and sort the data based on different criteria (e.g., by name or by longest TAT).
        - Report Info: New data entry. Goal: Input/Extend. Viz/Method: HTML Form (text and date inputs, button). Interaction: User input, form submission, data validation, add to internal data arrays, dashboard refresh. Justification: Enables users to extend the dataset directly within the application for real-time analysis of new entries.
        - CONFIRMATION: NO SVG graphics used. NO Mermaid JS used.
    -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc; /* slate-50 */
        }
        .kpi-card {
            background-color: white;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        .kpi-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -2px rgb(0 0 0 / 0.1);
        }
        .chart-container {
            position: relative;
            width: 100%;
            height: 400px;
            max-height: 50vh;
            background-color: white;
            padding: 1.5rem;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }
        .table-container {
            max-height: 400px;
            overflow-y: auto;
        }
        th {
            cursor: pointer;
            user-select: none;
        }
        th:hover {
            background-color: #f1f5f9; /* slate-100 */
        }
    </style>
</head>
<body class="antialiased text-slate-800">

    <div class="container mx-auto p-4 sm:p-6 lg:p-8">
        
        <header class="text-center mb-8">
            <h1 class="text-3xl sm:text-4xl font-bold text-slate-900">Turnaround Time Interactive Dashboard</h1>
            <p class="text-slate-600 mt-2">Analyze report generation efficiency from evaluation to upload.</p>
        </header>

        <div class="flex justify-center mb-8">
            <div class="inline-flex rounded-lg shadow-sm" role="group">
                <button type="button" id="btn-tat1" class="bg-slate-800 text-white ring-2 ring-slate-800 font-semibold py-2 px-6 rounded-l-lg">
                    Evaluation to Dictation
                </button>
                <button type="button" id="btn-tat2" class="bg-white text-slate-800 hover:bg-slate-100 font-semibold py-2 px-6 rounded-r-lg">
                    Dictation to Upload
                </button>
            </div>
        </div>

        <main id="dashboard-content">
            <section class="bg-white p-6 rounded-lg shadow-sm mb-8">
                <h2 class="text-xl font-bold mb-4 text-slate-900">Add New Entry</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                    <div>
                        <label for="input-name" class="block text-sm font-medium text-slate-700">Name</label>
                        <input type="text" id="input-name" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-slate-500 focus:ring-slate-500 sm:text-sm p-2">
                    </div>
                    <div>
                        <label for="input-eval-date" class="block text-sm font-medium text-slate-700">Date of Evaluation</label>
                        <input type="date" id="input-eval-date" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-slate-500 focus:ring-slate-500 sm:text-sm p-2">
                    </div>
                    <div>
                        <label for="input-received-date" class="block text-sm font-medium text-slate-700">Date Dictation Received</label>
                        <input type="date" id="input-received-date" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-slate-500 focus:ring-slate-500 sm:text-sm p-2">
                    </div>
                    <div>
                        <label for="input-uploaded-date" class="block text-sm font-medium text-slate-700">Date Report Uploaded</label>
                        <input type="date" id="input-uploaded-date" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-slate-500 focus:ring-slate-500 sm:text-sm p-2">
                    </div>
                </div>
                <button id="add-entry-btn" class="mt-6 bg-slate-800 text-white font-semibold py-2 px-6 rounded-lg hover:bg-slate-700 transition duration-200">
                    Add Entry
                </button>
                <p id="feedback-message" class="mt-4 text-sm"></p>
            </section>

            <section id="kpi-section" class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="kpi-card p-6 flex flex-col justify-between">
                    <h2 class="text-slate-500 font-medium">Average Turnaround</h2>
                    <p id="avg-tat" class="text-4xl font-bold text-slate-900 mt-2">0</p>
                </div>
                <div class="kpi-card p-6 flex flex-col justify-between">
                    <h2 class="text-slate-500 font-medium">Minimum Turnaround</h2>
                    <p id="min-tat" class="text-4xl font-bold text-green-600 mt-2">0</p>
                </div>
                <div class="kpi-card p-6 flex flex-col justify-between">
                    <h2 class="text-slate-500 font-medium">Maximum Turnaround</h2>
                    <p id="max-tat" class="text-4xl font-bold text-red-600 mt-2">0</p>
                </div>
            </section>
            
            <section class="grid grid-cols-1 xl:grid-cols-5 gap-8">
                <div class="xl:col-span-3">
                    <div class="chart-container">
                        <canvas id="tatChart"></canvas>
                    </div>
                </div>
                <div class="xl:col-span-2 bg-white p-6 rounded-lg shadow-sm">
                    <h2 class="text-xl font-bold mb-4 text-slate-900">Detailed Breakdown</h2>
                    <div class="table-container">
                        <table class="w-full text-left text-sm">
                            <thead class="bg-slate-50 border-b-2 border-slate-200 sticky top-0">
                                <tr id="table-header">
                                </tr>
                            </thead>
                            <tbody id="data-table">
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            
            let tat1Data = [
                { name: 'Gallegos, Susana', evalDateStr: 'June 04, 2025', receivedDateStr: 'June 05, 2025' },
                { name: 'Lopez, Steven', evalDateStr: 'June 04, 2025', receivedDateStr: 'June 05, 2025' },
                { name: 'Vasquez, Omar', evalDateStr: 'June 04, 2025', receivedDateStr: 'June 26, 2025' },
                { name: 'Sachs, Charles', evalDateStr: 'June 11, 2025', receivedDateStr: 'June 18, 2025' },
                { name: 'Gomez, Maria', evalDateStr: 'June 11, 2025', receivedDateStr: 'June 18, 2025' },
                { name: 'Lopez, Robert', evalDateStr: 'June 11, 2025', receivedDateStr: 'June 18, 2025' },
                { name: 'Mays, Gerald', evalDateStr: 'June 11, 2025', receivedDateStr: 'June 18, 2025' },
                { name: 'Longoria, Grace', evalDateStr: 'June 18, 2025', receivedDateStr: 'June 25, 2025' },
                { name: 'Coury Curtis', evalDateStr: 'June 18, 2025', receivedDateStr: 'July 01, 2025' },
                { name: 'Orozco, Maria', evalDateStr: 'June 18, 2025', receivedDateStr: 'June 25, 2025' },
                { name: 'Galleano, Melissa', evalDateStr: 'June 18, 2025', receivedDateStr: 'June 25, 2025' },
                { name: 'Vasquez, Tara', evalDateStr: 'June 26, 2025', receivedDateStr: 'July 01, 2025' },
                { name: 'Toscano, Kelly', evalDateStr: 'June 25, 2025', receivedDateStr: 'June 27, 2025' },
                { name: 'Vasquez, Omar', evalDateStr: 'June 04, 2025', receivedDateStr: 'June 27, 2025' },
                { name: 'Shields, Antwon', evalDateStr: 'July 01, 2025', receivedDateStr: 'July 01, 2025' },
                { name: 'Inge, Oswin', evalDateStr: 'June 25, 2025', receivedDateStr: 'July 01, 2025' },
                { name: 'Radgowski, Becky', evalDateStr: 'June 25, 2025', receivedDateStr: 'July 01, 2025' },
                { name: 'Franklin, Christopher', evalDateStr: 'July 02, 2025', receivedDateStr: 'July 10, 2025' },
                { name: 'Cox, Syreeta', evalDateStr: 'July 02, 2025', receivedDateStr: 'July 10, 2025' },
                { name: 'Namowicz, Caleb', evalDateStr: 'July 02, 2025', receivedDateStr: 'July 10, 2025' },
                { name: 'Sanchez, Peter', evalDateStr: 'July 16, 2025', receivedDateStr: 'July 22, 2025' },
                { name: 'Johnson, Jimmie', evalDateStr: 'July 16, 2025', receivedDateStr: 'July 22, 2025' },
                { name: 'Sanchez, Loreto', evalDateStr: 'July 23, 2025', receivedDateStr: 'July 29, 2025' },
                { name: 'Pabros, Ruby', evalDateStr: 'July 23, 2025', receivedDateStr: 'July 29, 2025' },
                { name: 'Haueisen, Heidi', evalDateStr: 'July 23, 2025', receivedDateStr: 'July 29, 2025' },
                { name: 'Mora, Mark', evalDateStr: 'July 23, 2025', receivedDateStr: 'July 29, 2025' },
                { name: 'Curtis, Nolan', evalDateStr: 'July 29, 2025', receivedDateStr: 'July 31, 2025' },
                { name: 'Rivera, Yvonne', evalDateStr: 'July 30, 2025', receivedDateStr: 'July 31, 2025' },
            ];

            let tat2Data = [
                { name: 'Gallegos, Susana', receivedDateStr: 'June 05, 2025', uploadedDateStr: 'June 19, 2025' },
                { name: 'Lopez, Steven', receivedDateStr: 'June 05, 2025', uploadedDateStr: 'June 16, 2025' },
                { name: 'Vasquez, Omar', receivedDateStr: 'June 26, 2025', uploadedDateStr: 'July 01, 2025' },
                { name: 'Sachs, Charles', receivedDateStr: 'June 18, 2025', uploadedDateStr: 'June 30, 2025' },
                { name: 'Gomez, Maria', receivedDateStr: 'June 18, 2025', uploadedDateStr: 'June 26, 2025' },
                { name: 'Lopez, Robert', receivedDateStr: 'June 18, 2025', uploadedDateStr: 'June 30, 2025' },
                { name: 'Mays, Gerald', receivedDateStr: 'June 18, 2025', uploadedDateStr: 'June 30, 2025' },
                { name: 'Longoria, Grace', receivedDateStr: 'June 25, 2025', uploadedDateStr: 'July 07, 2025' },
                { name: 'Orozco, Maria', receivedDateStr: 'June 25, 2025', uploadedDateStr: 'July 22, 2025' },
                { name: 'Galleano, Melissa', receivedDateStr: 'June 25, 2025', uploadedDateStr: 'July 22, 2025' },
                { name: 'Vasquez, Tara', receivedDateStr: 'July 01, 2025', uploadedDateStr: 'July 03, 2025' },
                { name: 'Toscano, Kelly', receivedDateStr: 'June 27, 2025', uploadedDateStr: 'July 11, 2025' },
                { name: 'Vasquez, Omar', receivedDateStr: 'June 27, 2025', uploadedDateStr: 'July 02, 2025' },
                { name: 'Shields, Antwon', receivedDateStr: 'July 01, 2025', uploadedDateStr: 'July 16, 2025' },
                { name: 'Inge, Oswin', receivedDateStr: 'July 01, 2025', uploadedDateStr: 'July 14, 2025' },
                { name: 'Radgowski, Becky', receivedDateStr: 'July 01, 2025', uploadedDateStr: 'July 10, 2025' },
                { name: 'Franklin, Christopher', receivedDateStr: 'July 10, 2025', uploadedDateStr: 'July 18, 2025' },
                { name: 'Cox, Syreeta', receivedDateStr: 'July 10, 2025', uploadedDateStr: 'July 18, 2025' },
                { name: 'Namowicz, Caleb', receivedDateStr: 'July 10, 2025', uploadedDateStr: 'July 17, 2025' },
                { name: 'Sanchez, Peter', receivedDateStr: 'July 22, 2025', uploadedDateStr: 'August 01, 2025' },
                { name: 'Johnson, Jimmie', receivedDateStr: 'July 22, 2025', uploadedDateStr: 'July 31, 2025' },
            ];
            
            let currentView = 'tat1';
            let currentSort = { column: 'days', order: 'desc' };
            
            const btnTat1 = document.getElementById('btn-tat1');
            const btnTat2 = document.getElementById('btn-tat2');
            
            const avgTatEl = document.getElementById('avg-tat');
            const minTatEl = document.getElementById('min-tat');
            const maxTatEl = document.getElementById('max-tat');
            
            const tableHeaderEl = document.getElementById('table-header');
            const dataTableEl = document.getElementById('data-table');

            // Input elements for adding new data
            const inputNameEl = document.getElementById('input-name');
            const inputEvalDateEl = document.getElementById('input-eval-date');
            const inputReceivedDateEl = document.getElementById('input-received-date');
            const inputUploadedDateEl = document.getElementById('input-uploaded-date');
            const addEntryBtn = document.getElementById('add-entry-btn');
            const feedbackMessageEl = document.getElementById('feedback-message');

            const ctx = document.getElementById('tatChart').getContext('2d');
            let tatChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: [],
                    datasets: [{
                        label: 'Turnaround Time (Days)',
                        data: [],
                        backgroundColor: 'rgba(51, 65, 85, 0.8)',
                        borderColor: 'rgba(51, 65, 85, 1)',
                        borderWidth: 1,
                        borderRadius: 4,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: { display: true, text: 'Days' }
                        },
                        x: {
                            ticks: {
                                autoSkip: false,
                                maxRotation: 90,
                                minRotation: 45
                            }
                        }
                    },
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return ` ${context.dataset.label}: ${context.parsed.y} days`;
                                }
                            }
                        }
                    }
                }
            });

            function formatDateForDisplay(dateString) {
                if (!dateString) return '';
                const date = new Date(dateString);
                if (isNaN(date.getTime())) return '';
                return date.toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' });
            }

            function calculateDays(startDateStr, endDateStr) {
                const startDate = new Date(startDateStr);
                const endDate = new Date(endDateStr);
                if (isNaN(startDate.getTime()) || isNaN(endDate.getTime())) {
                    return NaN;
                }
                return (endDate - startDate) / (1000 * 60 * 60 * 24);
            }

            function updateDashboard() {
                const data = currentView === 'tat1' ? tat1Data : tat2Data;
                
                // Calculate 'days' for each item based on the current view
                const processedData = data.map(item => {
                    let daysValue = NaN;
                    if (currentView === 'tat1') {
                        daysValue = calculateDays(item.evalDateStr, item.receivedDateStr);
                    } else { // tat2
                        daysValue = calculateDays(item.receivedDateStr, item.uploadedDateStr);
                    }
                    return { ...item, days: daysValue };
                }).filter(item => !isNaN(item.days)); // Filter out entries with invalid date calculations

                const days = processedData.map(d => d.days);
                const avg = days.length > 0 ? days.reduce((a, b) => a + b, 0) / days.length : 0;
                const min = days.length > 0 ? Math.min(...days) : 0;
                const max = days.length > 0 ? Math.max(...days) : 0;

                avgTatEl.textContent = avg.toFixed(2);
                minTatEl.textContent = min;
                maxTatEl.textContent = max;
                
                sortData(processedData);
                
                updateChart(processedData);
                updateTable(processedData);
            }

            function updateChart(data) {
                tatChart.data.labels = data.map(d => d.name);
                tatChart.data.datasets[0].data = data.map(d => d.days);
                tatChart.data.datasets[0].label = currentView === 'tat1' ? 'TAT (Evaluation to Dictation)' : 'TAT (Dictation to Upload)';
                tatChart.update();
            }

            function updateTable(data) {
                tableHeaderEl.innerHTML = '';
                dataTableEl.innerHTML = '';

                const headers = currentView === 'tat1' 
                    ? { name: 'Claimant', evalDateStr: 'Eval Date', receivedDateStr: 'Received Date', days: 'TAT (Days)' }
                    : { name: 'Claimant', receivedDateStr: 'Received Date', uploadedDateStr: 'Uploaded Date', days: 'TAT (Days)' };

                for (const key in headers) {
                    const th = document.createElement('th');
                    th.className = 'p-3 font-semibold text-slate-700';
                    th.textContent = headers[key];
                    th.dataset.sort = key;
                    if (key === currentSort.column) {
                        th.textContent += currentSort.order === 'asc' ? ' ▲' : ' ▼';
                    }
                    tableHeaderEl.appendChild(th);
                }

                data.forEach(item => {
                    const tr = document.createElement('tr');
                    tr.className = 'border-b border-slate-100 hover:bg-slate-50';
                    for (const key in headers) {
                        const td = document.createElement('td');
                        td.className = 'p-3 text-slate-800';
                        td.textContent = item[key];
                        tr.appendChild(td);
                    }
                    dataTableEl.appendChild(tr);
                });
            }

            function sortData(data) {
                data.sort((a, b) => {
                    const valA = a[currentSort.column];
                    const valB = b[currentSort.column];
                    
                    let comparison = 0;
                    if (typeof valA === 'string' && typeof valB === 'string') {
                        comparison = valA.localeCompare(valB);
                    } else {
                        if (valA > valB) {
                            comparison = 1;
                        } else if (valA < valB) {
                            comparison = -1;
                        }
                    }
                    
                    return currentSort.order === 'desc' ? comparison * -1 : comparison;
                });
            }

            function addEntry() {
                const name = inputNameEl.value.trim();
                const evalDateInput = inputEvalDateEl.value; // YYYY-MM-DD
                const receivedDateInput = inputReceivedDateEl.value; // YYYY-MM-DD
                const uploadedDateInput = inputUploadedDateEl.value; // YYYY-MM-DD

                // Validate inputs
                if (!name || !evalDateInput || !receivedDateInput || !uploadedDateInput) {
                    feedbackMessageEl.textContent = 'Please fill all fields.';
                    feedbackMessageEl.className = 'mt-4 text-sm text-red-600';
                    return;
                }

                const dateEval = new Date(evalDateInput);
                const dateReceived = new Date(receivedDateInput);
                const dateUploaded = new Date(uploadedDateInput);

                if (isNaN(dateEval.getTime()) || isNaN(dateReceived.getTime()) || isNaN(dateUploaded.getTime())) {
                    feedbackMessageEl.textContent = 'Invalid date format. Please use the date picker.';
                    feedbackMessageEl.className = 'mt-4 text-sm text-red-600';
                    return;
                }

                // Format dates for consistency with existing data strings
                const formattedEvalDate = formatDateForDisplay(evalDateInput);
                const formattedReceivedDate = formatDateForDisplay(receivedDateInput);
                const formattedUploadedDate = formatDateForDisplay(uploadedDateInput);

                // Add to tat1Data
                tat1Data.push({
                    name: name,
                    evalDateStr: formattedEvalDate,
                    receivedDateStr: formattedReceivedDate
                });

                // Add to tat2Data
                tat2Data.push({
                    name: name,
                    receivedDateStr: formattedReceivedDate,
                    uploadedDateStr: formattedUploadedDate
                });

                // Clear inputs
                inputNameEl.value = '';
                inputEvalDateEl.value = '';
                inputReceivedDateEl.value = '';
                inputUploadedDateEl.value = '';

                feedbackMessageEl.textContent = 'Entry added successfully!';
                feedbackMessageEl.className = 'mt-4 text-sm text-green-600';

                updateDashboard();
            }

            tableHeaderEl.addEventListener('click', (e) => {
                if (e.target.tagName === 'TH') {
                    const sortKey = e.target.dataset.sort;
                    if (currentSort.column === sortKey) {
                        currentSort.order = currentSort.order === 'asc' ? 'desc' : 'asc';
                    } else {
                        currentSort.column = sortKey;
                        currentSort.order = 'desc';
                    }
                    updateDashboard();
                }
            });

            btnTat1.addEventListener('click', () => {
                if (currentView !== 'tat1') {
                    currentView = 'tat1';
                    btnTat1.classList.add('bg-slate-800', 'text-white', 'ring-2', 'ring-slate-800');
                    btnTat1.classList.remove('bg-white', 'text-slate-800', 'hover:bg-slate-100');
                    btnTat2.classList.add('bg-white', 'text-slate-800', 'hover:bg-slate-100');
                    btnTat2.classList.remove('bg-slate-800', 'text-white', 'ring-2', 'ring-slate-800');
                    updateDashboard();
                }
            });

            btnTat2.addEventListener('click', () => {
                if (currentView !== 'tat2') {
                    currentView = 'tat2';
                    btnTat2.classList.add('bg-slate-800', 'text-white', 'ring-2', 'ring-slate-800');
                    btnTat2.classList.remove('bg-white', 'text-slate-800', 'hover:bg-slate-100');
                    btnTat1.classList.add('bg-white', 'text-slate-800', 'hover:bg-slate-100');
                    btnTat1.classList.remove('bg-slate-800', 'text-white', 'ring-2', 'ring-slate-800');
                    updateDashboard();
                }
            });
            
            addEntryBtn.addEventListener('click', addEntry);

            updateDashboard();
        });
    </script>
</body>
</html>
